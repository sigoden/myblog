{"data":{"site":{"siteMetadata":{"title":"Sigoden | Blog","siteUrl":"https://blog.sigoden.com","siteAuthor":"sigoden","githubUrl":"https://github.com/sigoden"}},"markdownRemark":{"html":"<h2 id=\"介绍\"><a href=\"#%E4%BB%8B%E7%BB%8D\" aria-label=\"介绍 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>介绍</h2>\n<p>Gatsby 是一款基于 React 和 GraphQL 的静态文档生成器。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6ed291ccd6b43d4f75d7660f0fa47c34/bfdc0/diagram.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 786px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.37254901960785%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAABjElEQVQ4y42T20rDQBCG+/43Cl7UV1AQ7AsoCFrwVipeFGwxWAgNTdPsbvaU35mNW5I0PQwMu9md+TKnHU3GU7A461HXddjH1XsPKWVQpVRY+zZxZXkcv2HUB7ZVCIHFYkH6jST5IU2gte7A2sDJMSBLnufIsgz5dotNIZGTbmmfpinKsrwcSGZ7Y+/JwRnU2Sf8Zh5K0M/iJJBFVxay1PDOEwCQRQkxf4VLP4KNojtrXNg7687XUFcGxUbCaAtHUCU1hAYM+VljUeZqD7X/wAi9v34+BIY0fR3SCynyZblELVPQMd117drAuz6wGZW6+XtIy4Uz8TuHWq9AAcNS5FyOdlNORhig5MApcz1ZZu8rLL/W+xqbAWiI8Orp+NhwuuzIddJUR1NVnZ9FaNvn4eblENiJlKDcpErZoDGqCOWydMbmdjoAdL5j5LkBWsBphdZx07Se7eBgMzDOGCv3hedQJrPQFEej09xdCIwdrqSBogGUuwpFrrEj5W9WrUxnDs++5bbRMRmy5ZfyB904go1q47BOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;\"\n        alt=\"原理图\"\n        title=\"\"\n        src=\"/static/6ed291ccd6b43d4f75d7660f0fa47c34/73d01/diagram.png\"\n        srcset=\"/static/6ed291ccd6b43d4f75d7660f0fa47c34/a3b1f/diagram.png 197w,\n/static/6ed291ccd6b43d4f75d7660f0fa47c34/07137/diagram.png 393w,\n/static/6ed291ccd6b43d4f75d7660f0fa47c34/73d01/diagram.png 786w,\n/static/6ed291ccd6b43d4f75d7660f0fa47c34/a5918/diagram.png 1179w,\n/static/6ed291ccd6b43d4f75d7660f0fa47c34/bfdc0/diagram.png 1275w\"\n        sizes=\"(max-width: 786px) 100vw, 786px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Gatsby 从各种媒介收集数据源，通过 GraphQL 暴露给前端，前端使用 React 生成界面。Gatsby 静态化整个链路，生成纯静态资源，以保证加载和渲染速度，同时也方便部署。</p>\n<p>Gatsby 不同于传统的诸如 jekyll, hugo, hexo, ghost 静态站点生成器。这儿从零开始使用 Gatsby 搭建一个博客站点作为入门。</p>\n<h2 id=\"准备\"><a href=\"#%E5%87%86%E5%A4%87\" aria-label=\"准备 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>准备</h2>\n<p>安装 Gatsby 命令行工具</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm i -g gatsby-cli</code></pre></div>\n<p>使用模板初始化项目</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">gatsby new blog https://github.com/gatsbyjs/gatsby-starter-hello-world</code></pre></div>\n<p>该命令克隆 starter 仓储并安装 npm 包。</p>\n<p>Gatsby 提供了开发模式，类似 webpack-dev-server。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd blog\ngatsby develop</code></pre></div>\n<p>Gatsby 会编译运行项目，终端最底部会有 <code class=\"language-text\">the development server is listening at:</code> <a href=\"http://localhost:8000\">http://localhost:8000</a>. 浏览器打开该地址</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a273c8965ea8138ecda407d435619be4/bde20/hello-world.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 786px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 68.96162528216703%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAABiklEQVQ4y9WSzUvCYBzHVxH0B3TrHHSQTl0jiLr0IP0TQXSLUFBvXYI6VdBFzKueugUFaR16g5So3HKbijSDOefLnOna3H7teZx5CdE69YUPz563z7PDl6LspG8v55LPsdV7OrPi2ntE0zsJ5NpNoqntB7R4mEBMikb0K4sYG5pJo5cUQ775TA5xfBbjZrns8vXN3QT2UdxT8kJtFoHPFyCaFOE0rcAZV4cTWoFztgaqqoJcrkBJLkOlWoO62iDzN6EAQuEdxKIEfCbbiESiM9g3znKZuNbSodFQDQDL6gEEnHa7TTBN05mb1qeuW7qu4wX8qBIMBmeJsCiKcfsi2DuGaYHVtk/gU90RK7vyHzDxXU3T6qFQqCMslUpE6DhgSIiw1Wr1hJIkfQudEQbNQMJh8v+FhjV8OsJmsyeUZTnmPGj0qUff2tidVI7D4Y5QEIQrp0tgGMZQ2MUmfyLlcx9HB/tEOOb1et2BQMDj8/k2f4Pf79/ybKyvLS3MT1KVSpVyMmIz+gdIvgANa3AgFcwClQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;\"\n        alt=\"screenshot\"\n        title=\"\"\n        src=\"/static/a273c8965ea8138ecda407d435619be4/73d01/hello-world.png\"\n        srcset=\"/static/a273c8965ea8138ecda407d435619be4/a3b1f/hello-world.png 197w,\n/static/a273c8965ea8138ecda407d435619be4/07137/hello-world.png 393w,\n/static/a273c8965ea8138ecda407d435619be4/73d01/hello-world.png 786w,\n/static/a273c8965ea8138ecda407d435619be4/a5918/hello-world.png 1179w,\n/static/a273c8965ea8138ecda407d435619be4/03181/hello-world.png 1572w,\n/static/a273c8965ea8138ecda407d435619be4/bde20/hello-world.png 1772w\"\n        sizes=\"(max-width: 786px) 100vw, 786px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id=\"体验\"><a href=\"#%E4%BD%93%E9%AA%8C\" aria-label=\"体验 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>体验</h2>\n<p>访问　<a href=\"http://localhost:8000\">http://localhost:8000</a> 时，Gatsby 会加载 <code class=\"language-text\">src/pages/index.js</code> 并渲染。</p>\n<blockquote>\n<p>src/pages 下的文件会映射成页面，如 src/pages/about.js 对应地址为 <a href=\"http://localhost:8000/about/\">http://localhost:8000/about/</a> 页面。</p>\n</blockquote>\n<p>src/pages 下的 js 文件是普通的 jsx 文件，你可以调用 React 函数，你可以安装并使用 npm 包，你可以应用包括 css, css-in-js, css modules 在内的各种 css 风格。</p>\n<p>现在我们再建一个页面 src/pages/about.js, 并让页面支持导航，可以在 home 和 about 之间跳转。</p>\n<p>index.js 和 about.js 代码如下</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ./src/pages/about.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> Link <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby-link\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ListLink</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> display<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`inline-block`</span></span><span class=\"token punctuation\">,</span> marginRight<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`1rem`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> margin<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`0 auto`</span></span><span class=\"token punctuation\">,</span> maxWidth<span class=\"token punctuation\">:</span> <span class=\"token number\">650</span><span class=\"token punctuation\">,</span> padding<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`1.25rem 1rem`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> marginBottom<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`1.5rem`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> textShadow<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`none`</span></span><span class=\"token punctuation\">,</span> backgroundImage<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`none`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> display<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`inline`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">MyBlog</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> listStyle<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`none`</span></span><span class=\"token punctuation\">,</span> float<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`right`</span></span><span class=\"token punctuation\">,</span> margin<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListLink</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Home</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ListLink</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListLink</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/about/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">About</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ListLink</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      Home Page\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ./src/pages/about.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> Link <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby-link\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ListLink</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> display<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`inline-block`</span></span><span class=\"token punctuation\">,</span> marginRight<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`1rem`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> margin<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`0 auto`</span></span><span class=\"token punctuation\">,</span> maxWidth<span class=\"token punctuation\">:</span> <span class=\"token number\">650</span><span class=\"token punctuation\">,</span> padding<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`1.25rem 1rem`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> marginBottom<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`1.5rem`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> textShadow<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`none`</span></span><span class=\"token punctuation\">,</span> backgroundImage<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`none`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> display<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`inline`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">MyBlog</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> listStyle<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`none`</span></span><span class=\"token punctuation\">,</span> float<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`right`</span></span><span class=\"token punctuation\">,</span> margin<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListLink</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Home</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ListLink</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListLink</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/about/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">About</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ListLink</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      About Page\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/09765a676c00921b36e4ba9849d79b2a/89f99/home-01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 629px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 16.534181240063592%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsSAAALEgHS3X78AAAAWUlEQVQI152MSwqAMBBDe/8TuhVXVp2W6ccPdGJb1GULBsIkTHhq9yf0ZFFukYhUt/T+U0pwJuKIF5yNuQuUz2EcZpDmH0ABU6hApgcYggeZDcuqv2EP2NrcAtHsbuKHZDAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;\"\n        alt=\"index-demo\"\n        title=\"\"\n        src=\"/static/09765a676c00921b36e4ba9849d79b2a/89f99/home-01.png\"\n        srcset=\"/static/09765a676c00921b36e4ba9849d79b2a/a3b1f/home-01.png 197w,\n/static/09765a676c00921b36e4ba9849d79b2a/07137/home-01.png 393w,\n/static/09765a676c00921b36e4ba9849d79b2a/89f99/home-01.png 629w\"\n        sizes=\"(max-width: 629px) 100vw, 629px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>一个只有两个页面的站点就完成了，可以试试点击链接，是能够正常跳转的。</p>\n<h2 id=\"布局\"><a href=\"#%E5%B8%83%E5%B1%80\" aria-label=\"布局 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>布局</h2>\n<p>上面的站点中，导航部分明显是通用的，它是属于布局页面的。我们这就将它抽离出来，放入合适的位置。</p>\n<blockquote>\n<p>src/layouts 存放布局，src/layouts/index.js 是默认布局。</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ./src/layouts/index.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> Link <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby-link\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ListLink</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> display<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`inline-block`</span></span><span class=\"token punctuation\">,</span> marginRight<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`1rem`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> margin<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`0 auto`</span></span><span class=\"token punctuation\">,</span> maxWidth<span class=\"token punctuation\">:</span> <span class=\"token number\">650</span><span class=\"token punctuation\">,</span> padding<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`1.25rem 1rem`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> marginBottom<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`1.5rem`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> textShadow<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`none`</span></span><span class=\"token punctuation\">,</span> backgroundImage<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`none`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> display<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`inline`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">MyBlog</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> listStyle<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`none`</span></span><span class=\"token punctuation\">,</span> float<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`right`</span></span><span class=\"token punctuation\">,</span> margin<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListLink</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Home</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ListLink</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListLink</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/about/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">About</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ListLink</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token punctuation\">{</span><span class=\"token function\">children</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>src/layouts 下的页面组件有一个 children 属性</p>\n</blockquote>\n<p>抽出布局元素后，src/pages 下的 index.js  和 about.js 变得很简单了</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ./src/pages/index.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    Home Page\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ./src/pages/about.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    About Page\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"graphql\"><a href=\"#graphql\" aria-label=\"graphql permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GraphQL</h2>\n<p>Gatsby 基于 React 和 GraphQL。React 负责显示层，GraphQL 负责数据层。</p>\n<p>现在我们需要在 about 页面显示邮件信息，这个信息可能变动，可能还要显示在其它页面，直接在 about 页面中写死是没发接受的，如何将数据提供给 about 页面中的 React 呢？</p>\n<p>答案是 GraphQL。页面中需要的数据统统需要走 GraphQL 获取。</p>\n<p>Gatsby 为我们提供了 GraphQL IDE, 访问地址是 <a href=\"http://localhost:8000/___graphql%E3%80%82\">http://localhost:8000/___graphql。</a></p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9a2ddd6c04a1c127b074e42b6afa826b/031e8/graphql-01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 786px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 55.59748427672956%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABd0lEQVQoz3WSy07DMBBF8/8LBCz4HrZQltAlLTR90ITEbzsm8WVs17RQaulo3LHm6NpptVgs8Pwyx6peY7F8Q73e4H1VY73ZprpvWjRNg7Ztf2ja3PuPqu97OKOA0SF4C3z9gfp+cHDDACklus8OkgsIIcGFAOcn0O9qdBr3rx53T8TM4/pxws2MoHpL9ephwpIFxBWloueot5/YdgLGOhg3wEboLO4rZy32dDh/rbFjBr0N6Mz0C+fHLKQBpQ1arlDveyihoIXOUE8bi8qS0GgNzhgurWnKwoFSKEXDJGXyIGIqy5gsQgetBLp2i9EbDM78DEml6FqWhNNRGPvEruNQSZSFxrn0BJWjjRQMkjUYBw1nNT2+StL4EYwxZ0JBZ12UKZOhXkx3SEgDIRDxaiHtgYAQ8oeIteyLMPJB7y57umbE5nRJGBOUgUurnHvvU3pJCe1BUkSRdOVTYUnzHyUhp/9flhxFRXaW8FLSo9CndGX4tBa+AR4iUZGB73qjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;\"\n        alt=\"graphql\"\n        title=\"\"\n        src=\"/static/9a2ddd6c04a1c127b074e42b6afa826b/73d01/graphql-01.png\"\n        srcset=\"/static/9a2ddd6c04a1c127b074e42b6afa826b/a3b1f/graphql-01.png 197w,\n/static/9a2ddd6c04a1c127b074e42b6afa826b/07137/graphql-01.png 393w,\n/static/9a2ddd6c04a1c127b074e42b6afa826b/73d01/graphql-01.png 786w,\n/static/9a2ddd6c04a1c127b074e42b6afa826b/031e8/graphql-01.png 795w\"\n        sizes=\"(max-width: 786px) 100vw, 786px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<blockquote>\n<p>sitePage 可供访问的页面; sitePlugin 加载的插件; site 站点配置</p>\n</blockquote>\n<p>邮件信息应该在站点配置中。看看里面有什么?</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4b5432e52ea7c3b10a6f8894ffa1e4f9/f4471/graphql-02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 438px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 88.58447488584476%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAABnElEQVQ4y62TW07DMBBFszT4gT2wFzYDEnyyAzbQAn8I2jRN2zzbpokTN7ETO5exAQnxkPpgpKt4lPj4xjPjpEmCsetiNHbx8vKK1WqFLMvguhPkeYE15fP5DFEcoygKhGFotdlsbP5dznTq4eHxkfSEwXAI358RYI7BYIggCEkLjEYjeJ6HmKCTyYQOG2OxCBBF0Q85VVWhrmtorYC+h5QthJDoug6NEHbdtq2VoPxzLaW0+Xc5TdNYqw2BatGCqDgmnO12C845OqUxyxpEpULCeySVRkxacg1NzvsdZYGsLAFZ4/K+wcmVwNlNi/PbFqfXLS7uJLhU9nSzYSeHJQG11giXOZ49qmLGwQRQiB5Fo6DUHkBTEHOP5mNeMWqTJXjJ6JV+/6LXhwNN/+Ws/NgMe3dKHQFkVO0oTmBaybSLCQM7GGi63zRsTNMj5D8A8zy3I5akqW3eo4GMMRqfGGm6tBPTU0HMxBwENLFeZzTLUyyCAFOaad/3Lfyd0+/v0PTipyPzNL/dfXG3N/Cv2AX0K/AvHeVwHze/xRs/T3khD1DdUwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;\"\n        alt=\"graphql\"\n        title=\"\"\n        src=\"/static/4b5432e52ea7c3b10a6f8894ffa1e4f9/f4471/graphql-02.png\"\n        srcset=\"/static/4b5432e52ea7c3b10a6f8894ffa1e4f9/a3b1f/graphql-02.png 197w,\n/static/4b5432e52ea7c3b10a6f8894ffa1e4f9/07137/graphql-02.png 393w,\n/static/4b5432e52ea7c3b10a6f8894ffa1e4f9/f4471/graphql-02.png 438w\"\n        sizes=\"(max-width: 438px) 100vw, 438px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>没有我们所需要的。怎样将邮件信息放入 GraphQL > site 中呢？</p>\n<blockquote>\n<p>Gatsby 启动时会读取项目下的 gatsby-config.js 文件，并将 siteMetadata 放入 GraphQL > site 下。</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// ./gatsby-config.js</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  siteMetadata<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    mail<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby@example.com`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>重新运行 <code class=\"language-text\">gatsby develop</code>,  发现 GraphQL > site 下多了 <code class=\"language-text\">siteMetadata</code> 字段。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cb0cc920fd1a6e89811a214c6b3b19a8/1d25d/graphql-03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 786px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 43.76498800959232%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAAA5klEQVQoz8WQUW+DIBRG/f8/b5367MQuQzuswAW0+u1ipyO22R5HcsINyT05ISuKAnUtUFUVzk0DIcRKw3PXdWjbdkdKeeD+Vosz3sQ7yrJERs7BhxGBmabpgRAClOpx7QcYY2GshTYJ2mBgjCW8nE7INAW0A0vHG56deZ5heEF+KNRS4aI0rLYg40DkQe5OjMrzHFmsWJaFV5f1TtmFXHXlmq7nmk8uvTBRbAiWZZYcnB/xGoXbYnofhYPmZSJ4zzUp37JILHwQriTzXsh16XLK9v5UmJ6j0NJP0fZvfxb+KnT/JPwCiRe5CrCaZLUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;\"\n        alt=\"graphql\"\n        title=\"\"\n        src=\"/static/cb0cc920fd1a6e89811a214c6b3b19a8/73d01/graphql-03.png\"\n        srcset=\"/static/cb0cc920fd1a6e89811a214c6b3b19a8/a3b1f/graphql-03.png 197w,\n/static/cb0cc920fd1a6e89811a214c6b3b19a8/07137/graphql-03.png 393w,\n/static/cb0cc920fd1a6e89811a214c6b3b19a8/73d01/graphql-03.png 786w,\n/static/cb0cc920fd1a6e89811a214c6b3b19a8/1d25d/graphql-03.png 834w\"\n        sizes=\"(max-width: 786px) 100vw, 786px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>现在已经成功的将邮件信息成功的放入到 GraphQL 了，接下来我们需要在 src/pages/about.js 中获取并使用这一信息。 </p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">//./src/pages/about.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    About Page\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      mail: </span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>siteMetadata<span class=\"token punctuation\">.</span>mail<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> query <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token string\">`\n  query AboutQuery {\n    site {\n      siteMetadata {\n        mail\n      }\n    }\n  }\n`</span></span></code></pre></div>\n<p>如上，在 about.js 中添加 <code class=\"language-text\">graphql</code> 标签模板，并调用属性 data 即可。</p>\n<blockquote>\n<p>Gatsby 内部会通过 AST 读取 <code class=\"language-text\">graphql</code> 标签模板，请求获取并获取数据，之后将数据绑定到组件的 data 属性中。页面只需要负责解答获取哪些数据，怎样使用数据即可。</p>\n</blockquote>\n<h2 id=\"数据\"><a href=\"#%E6%95%B0%E6%8D%AE\" aria-label=\"数据 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>数据</h2>\n<p>就博客系统来说，原始数据是一批 Markdown 文件，我们需要将这批数据导入到 Gatsby 系统，使其能被页面组件以 GraphQL 查询访问。</p>\n<p>我们使用插件 <code class=\"language-text\">gatsby-source-filesystem</code> 和 <code class=\"language-text\">gatsby-transformer-remark</code> 完成这项工作。</p>\n<p><code class=\"language-text\">gatsby-source-filesystem</code> 读取文件系统，并将文件和目录信息导入 GraphQL 中。 <code class=\"language-text\">gatsby-transformer-remark</code> 从文件系统信息中获取 markdown 文件信息，提取转化后导入 GraphQL 中。</p>\n<p>准备两篇博客文章　</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\">// ./blogs/pandas-and-bananas.md\n\n<span class=\"token hr punctuation\">---</span>\ntitle: Pandas and Bananas\n<span class=\"token title important\">date: \"2017-08-21\"\n<span class=\"token punctuation\">---</span></span>\n\nDo Pandas eat bananas? Check out this short video that shows that yes! pandas do\nseem to really enjoy bananas!</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\">// ./blogs/sweet-pandas-eating-sweets.md\n\n<span class=\"token hr punctuation\">---</span>\ntitle: \"Sweet Pandas Eating Sweets\"\n<span class=\"token title important\">date: \"2017-08-10\"\n<span class=\"token punctuation\">---</span></span>\n\nPandas are really sweet.\n\nHere's a video of a panda eating sweets.</code></pre></div>\n<p>其次我们需要安装插件</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm i -S gatsby-source-filesystem gatsby-transformer-remark</code></pre></div>\n<p>并在 <code class=\"language-text\">gatsby-config.js</code> 配置插件及其选项</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// ./gatsby-config.js\n\nmodule.exports = {\n  siteMetadata: {\n    mail: `gatsby@example.com`,\n  },\n  plugins: [\n    {\n      resolve: `gatsby-source-filesystem`,\n      options: {\n        name: `src`,\n        path: `${__dirname}/blogs/`,\n      },\n    },\n  ],\n}</code></pre></div>\n<p>访问 GraphQL, 发现多了一些 Query。访问 allFile，可以获取到刚添加的博客文件信息。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/624cb86c7aa09e639b8d0e3232981a5b/981f8/graphql-04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 786px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 56.90276110444178%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABEklEQVQoz62S627DIAyF8/6PuT9tWkICtiGQLGd2em9abZVm6cgYyZ+PEU0YBpAkjOOIUgpqrVdZPU0TRATe9wghIhKfFOl6DnomErSHI5qcBL0UuJjwLorC4xDxtevgtTHroPSkooM7HdrY9O95Rp1mLMuy0QrUBjYnA2PXetChB7cD+HAStT2SJ7hWHTIzZgVa3EMutYWtT0HX6iN4IEjgB9ldlgznOl055zPoBnjOpVRwNIeEvblzYaPV4f54A/7q0Bp7c0lrZq9u/TlrnYLoym4LvI97YNSnoZSQ9DeksTxI9G6sE5z3fwfa10hZYSlDXigr2HUfAFn/qgGt+TmvQH3nz4AsD4DV7X8BL7BXwB/7x1pecBHz4gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;\"\n        alt=\"graphql\"\n        title=\"\"\n        src=\"/static/624cb86c7aa09e639b8d0e3232981a5b/73d01/graphql-04.png\"\n        srcset=\"/static/624cb86c7aa09e639b8d0e3232981a5b/a3b1f/graphql-04.png 197w,\n/static/624cb86c7aa09e639b8d0e3232981a5b/07137/graphql-04.png 393w,\n/static/624cb86c7aa09e639b8d0e3232981a5b/73d01/graphql-04.png 786w,\n/static/624cb86c7aa09e639b8d0e3232981a5b/981f8/graphql-04.png 833w\"\n        sizes=\"(max-width: 786px) 100vw, 786px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>添加 <code class=\"language-text\">gatsby-transformer-remark</code>， 从文件中提取并解析 markdown 文件。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// ./gatsby-config.js\n\nmodule.exports = {\n  siteMetadata: {\n    mail: `gatsby@example.com`,\n  },\n  plugins: [\n    {\n      resolve: `gatsby-source-filesystem`,\n      options: {\n        name: `src`,\n        path: `${__dirname}/blogs/`,\n      },\n    },\n    `gatsby-transformer-remark`,\n  ],\n}</code></pre></div>\n<p>访问 allMarkdownRemark</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/31e9e915a9b989a08548ffed8d91884e/d181f/graphql-05.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 786px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 76.89530685920577%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAABxElEQVQ4y5VU27KiMBD0///wbLkProhAEkKuBLTs7QlHj+X6sKaqawaK6fSkJ+z2+z2+vn7hdDqhOTY1tm2LpmnQ9z201lBKQUm85y/o+N3heEZzarGbpgkxZcQ8V6zr+sCyLLhcLkgpYTQWznlMPmByAZ7Rh1jhap4wDAq7LB/HgrONKOsV75YQe+twaA1OxmNkcS4FM99nQVlQuPFoLXayu6zOJsR5qfntdntAVmFBpJJpiugUO9IOcZgeCHyXuJHuqDDGWItcKkjl8pZwWVb43iKeRwz7DvYwIDT6h1QINQkHjV0IAdfr9VF8j8+5EAbjkGygaWz7TsbnSGVCmMcArczW8ivZW4WDRVIOhkpHkkYi/FEI7ViRSGg0CQsP95XoX4U8w7xNgpc4F2RORkrzZsqymWLElFfC5/VMGDxNYYtKS+tsk4pqyxJHj+zS1vJ/Ea5iCls7crB/93DSLnMxJnznaXAfEMoZVicdOhYPnMeHOhkhQhQaM35AeDZI/QRFA3qOTRQzROFxU1nHptcfKuRZWbrtSVyJOJcp5oo5F5jxA4Xicvh2OLEmzz9I88xruH5GKD+AxLGpBIyvmHk9hfAvBtyJcDHOVgEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;\"\n        alt=\"graphql\"\n        title=\"\"\n        src=\"/static/31e9e915a9b989a08548ffed8d91884e/73d01/graphql-05.png\"\n        srcset=\"/static/31e9e915a9b989a08548ffed8d91884e/a3b1f/graphql-05.png 197w,\n/static/31e9e915a9b989a08548ffed8d91884e/07137/graphql-05.png 393w,\n/static/31e9e915a9b989a08548ffed8d91884e/73d01/graphql-05.png 786w,\n/static/31e9e915a9b989a08548ffed8d91884e/d181f/graphql-05.png 831w\"\n        sizes=\"(max-width: 786px) 100vw, 786px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>这样我们就能以 GraphQL 形式获取博客的 Markdown 文件数据。</p>\n<h2 id=\"节点\"><a href=\"#%E8%8A%82%E7%82%B9\" aria-label=\"节点 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>节点</h2>\n<p>节点是 Gatsby 数据的基本单元，Markdown 文件在 GraphQL 中对应的节点内容如下:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/home/sigoden/blog-codes/2018-03-13-how-to-use-gatsby/blogs/sweet-pandas-eating-sweets.md absPath of file >>> MarkdownRemark\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"parent\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/home/sigoden/blog-codes/2018-03-13-how-to-use-gatsby/blogs/sweet-pandas-eating-sweets.md absPath of file\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"children\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"internal\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"---\\ntitle: \\\"Sweet Pandas Eating Sweets\\\"\\ndate: \\\"2017-08-10\\\"\\n---\\n\\nPandas are really sweet.\\n\\nHere's a video of a panda eating sweets.\\n\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"MarkdownRemark\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"contentDigest\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"599beb9abf7899c2ea0aa891810a95b6\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"owner\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby-transformer-remark\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"frontmatter\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Sweet Pandas Eating Sweets\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"date\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2017-08-10\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"_PARENT\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/home/sigoden/blog-codes/2018-03-13-how-to-use-gatsby/blogs/sweet-pandas-eating-sweets.md absPath of file\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"parent\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/home/sigoden/blog-codes/2018-03-13-how-to-use-gatsby/blogs/sweet-pandas-eating-sweets.md absPath of file\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"excerpt\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Pandas are really sweet. Here's a video of a panda eating sweets.\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"fileAbsolutePath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/home/sigoden/blog-codes/2018-03-13-how-to-use-gatsby/blogs/sweet-pandas-eating-sweets.md\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"html\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;p>Pandas are really sweet.&lt;/p>\\n&lt;p>Here's a video of a panda eating sweets.&lt;/p>\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"htmlAst\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"root\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"children\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"element\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"tagName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"p\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"properties\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"children\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Pandas are really sweet.\"</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\\n\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"element\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"tagName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"p\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"properties\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"children\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Here's a video of a panda eating sweets.\"</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"data\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"quirksMode\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"headings\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"timeToRead\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"tableOfContents\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"wordCount\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"paragraphs\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"sentences\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"words\"</span><span class=\"token operator\">:</span> <span class=\"token number\">19</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>数据还是蛮丰富的，但是我们还缺少一个字段 <code class=\"language-text\">slug</code>(对应文章链接)，我们需要一种机制，能够修改 GraphQL 的数据。</p>\n<p>为了保证数据安全, Gatsby 的 GraphQL 只提供了查询，没有提供修改。Gatsby 提供了 Hook API 让我们可以在存储前进行修改数据。</p>\n<blockquote>\n<p>在启动时，Gatsby 会加载 <code class=\"language-text\">gatsby-node.js</code> 文件，并注册或执行里面的 Hook 函数。</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// ./gatsby-node.js\n\nconst { createFilePath } = require(`gatsby-source-filesystem`)\n\nexports.onCreateNode = ({ node, getNode, boundActionCreators }) =&gt; {\n  const { createNodeField } = boundActionCreators\n  if (node.internal.type === `MarkdownRemark`) {\n    const slug = createFilePath({ node, getNode, basePath: `blogs` })\n    createNodeField({\n      node,\n      name: `slug`,\n      value: slug,\n    })\n  }\n}</code></pre></div>\n<p><code class=\"language-text\">onCreateNode</code> 在添加节点后被调用，我们检测类型为 <code class=\"language-text\">MarkdownRemark</code> 的的节点，为它们添加一个 <code class=\"language-text\">slug</code> 字段，<code class=\"language-text\">slug</code> 的值通过 Markdown 文件路径生成。这样就完成了 GraphQL 数据的修改。</p>\n<p>在 GraphiQL 中，发现节点下多了一个 <code class=\"language-text\">fileds</code> 字段，该字段下有一个 <code class=\"language-text\">slug</code> 字段。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8ebd7081d74166bb3375ee17cac2c299/d181f/graphql-06.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 786px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 49.939831528279186%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABM0lEQVQoz52S246DMAxE+f8v7Fu1QKEttyTODRDM2hS6gNqXjTQaJ0qOxlaS6/WKy+WCPM+RZRmKosDtViz7sixR1zWqqkIlvtUnPR5PpHmJnzRDopUCWQcXIpwP6PsBw/CncRzhvUfbdtDKQBmC0gTDbsgu0lwL487gxDk+cBFpbWDjgGmecV4DQ0kbZEWNvFLozCtAiD28iOt+GNE0rQAdwBDje0Q+lDXzftMC5KTE9yx3kD46VK2GJ4aaVS4gcmd10yAhoiUB1sfzzrda2rbckmegZpAWiLKwLPED0FqLaZqOsBNQEgqQrMezMzDsPsa3ZPZvYAjhkAo70D6hDF1mdW80nizfEWzDc29fHnxkYPsBuFtnIK1th/VH7PU94RegfA156FeY+KZ/AbeWP0H3wF8bYQge9ys2ZwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;\"\n        alt=\"graphql\"\n        title=\"\"\n        src=\"/static/8ebd7081d74166bb3375ee17cac2c299/73d01/graphql-06.png\"\n        srcset=\"/static/8ebd7081d74166bb3375ee17cac2c299/a3b1f/graphql-06.png 197w,\n/static/8ebd7081d74166bb3375ee17cac2c299/07137/graphql-06.png 393w,\n/static/8ebd7081d74166bb3375ee17cac2c299/73d01/graphql-06.png 786w,\n/static/8ebd7081d74166bb3375ee17cac2c299/d181f/graphql-06.png 831w\"\n        sizes=\"(max-width: 786px) 100vw, 786px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id=\"页面\"><a href=\"#%E9%A1%B5%E9%9D%A2\" aria-label=\"页面 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>页面</h2>\n<p>在 Gatsby 中，节点是没有路由的，我们无法通过浏览器直接访问。我们能访问的只用页面。查询一些系统中现有的页面。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b03644859068723eef0d3eb3a6f0cf86/2b385/graphql-07.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 786px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 78.80239520958084%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAAB20lEQVQ4y51U2W7jMBDz/39hHorWSXzFp6TR4RwNS8kxNu2mwHoFDMaXKJIz4yzPc+x2OxRFgcPhiLqqUJZlirqu0fc9uq5b8uP6VRzLGseiQqaUgoiF9QE+BJzP529xuVwQ+HwcJ2iloY2kMD+yNhYDv8mcszD+jHK0+G3dbjeIFpTVgKJTcDw88DA/zwzmMCMwi3XIrCXQ/Y5GObjzNQHceb9GXNfrFeIchBuLXkENGm40sJrKJoFzIQEbKs1EJDGw4QL/C2BiSEkzN+7rkV71sPsO5tBBWgWrCKodzKQXhpHBulaQ5+vb5ydkJKveoK8I+HFCXw6QjxbmrYEUQ3qnW3oYDV/Y/AF4yZByIksV2YhPMp1jFpfuo49J8gr4DPQXwwhID2MRCvo30kcfpdJDlwqzFMfYF4DP65tktkawHgdW+j0/QeUt5NhDmgm2W+zQ3bQBkMwsWSkCnFiQgV7KA9QOBk5Z6EH9I+DaNvRsoo/RrxQPuS5slRw9ZNMGbt6TZduM8GQaG/z/AKNkZRDYayXb5e29wZDa5gRD+cLetDxAN8MGhpOB9Jxljt7EzSpWORaE2bHangUzPHSDZJs8jBLjHId1jhnuMcubPIx/leSZn1P+GWtjfwFLLtl7oV1BHgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;\"\n        alt=\"graphql\"\n        title=\"\"\n        src=\"/static/b03644859068723eef0d3eb3a6f0cf86/73d01/graphql-07.png\"\n        srcset=\"/static/b03644859068723eef0d3eb3a6f0cf86/a3b1f/graphql-07.png 197w,\n/static/b03644859068723eef0d3eb3a6f0cf86/07137/graphql-07.png 393w,\n/static/b03644859068723eef0d3eb3a6f0cf86/73d01/graphql-07.png 786w,\n/static/b03644859068723eef0d3eb3a6f0cf86/2b385/graphql-07.png 835w\"\n        sizes=\"(max-width: 786px) 100vw, 786px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>只有我们先前创建的 home 和 about，以及一个开发模式下的 404 页面。</p>\n<p>我们需要将 MarkdownRemark 节点转换为 SitePage，以便访问。</p>\n<blockquote>\n<p>GraphQL 提供了 <code class=\"language-text\">createPages</code> 函数，它会在节点创建和变换完成之后调用，在该函数中我们使用 GraphQL 获取数据，再从这些数据中生成页面。</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// ./gatsby-node.js\n\nconst path = require(`path`)\nconst { createFilePath } = require(`gatsby-source-filesystem`)\n\nexports.onCreateNode = ({ node, getNode, boundActionCreators }) =&gt; {\n  const { createNodeField } = boundActionCreators\n  if (node.internal.type === `MarkdownRemark`) {\n    const slug = createFilePath({ node, getNode, basePath: `blogs` })\n    createNodeField({\n      node,\n      name: `slug`,\n      value: slug,\n    })\n  }\n}\n\nexports.createPages = ({ graphql, boundActionCreators }) =&gt; {\n  const { createPage } = boundActionCreators\n  return new Promise((resolve, reject) =&gt; {\n    graphql(`\n      {\n        allMarkdownRemark {\n          edges {\n            node {\n              fields {\n                slug\n              }\n            }\n          }\n        }\n      }\n    `\n    ).then(result =&gt; {\n      result.data.allMarkdownRemark.edges.forEach(({ node }) =&gt; {\n        createPage({\n          path: node.fields.slug,\n          component: path.resolve(`./src/templates/blog-post.js`),\n          context: {\n            // Data passed to context is available in page queries as GraphQL variables.\n            slug: node.fields.slug,\n          },\n        })\n      })\n      resolve()\n    })\n  })\n}</code></pre></div>\n<p><code class=\"language-text\">createPage</code> 函数用来创建页面。其参数</p>\n<ul>\n<li>path: 页面的相对访问路径，以 / 开头</li>\n<li>component: 模板组件绝对路径。同 pages 下的 js 一样是一个 React 组件</li>\n<li>layout: 布局，默认为 <code class=\"language-text\">index</code></li>\n<li>context: 页面的上下文数据对象。会以 <code class=\"language-text\">props.pathContext</code> 的方式传递给 React 组件，也会以参数形式传递给 graphql 查询。</li>\n</ul>\n<p>新建博客页面的模板 <code class=\"language-text\">src/templates/blog-post.js</code>，其内容如下:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// ./src/templates/blog-post.js\n\nimport React from &quot;react&quot;\n\nexport default ({ data }) =&gt; {\n  const post = data.markdownRemark\n  return (\n    &lt;div&gt;\n      &lt;h1&gt;{post.frontmatter.title}&lt;/h1&gt;\n      &lt;div dangerouslySetInnerHTML={{ __html: post.html }} /&gt;\n    &lt;/div&gt;\n  )\n}\n\nexport const query = graphql`\n  query BlogPostQuery($slug: String!) {\n    markdownRemark(fields: { slug: { eq: $slug } }) {\n      html\n      frontmatter {\n        title\n      }\n    }\n  }\n`</code></pre></div>\n<p>再查询一下 SitePage, 发现已生成了 Markdown 对应页面。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8e2d84be2b8928f2a6fc9f574a03dc1c/1d25d/graphql-08.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 786px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 61.15107913669065%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABfklEQVQoz5VSa2+DMAzk///DTZsqlUcI5O08gK7cTBlTt/ZLLZ3sBPnwnVOdTie8vb2jbVs0TQPRdRBC3M5SSmitoZSC0mrPTyDlgKaVOJ9rVMYYeB8QU4aniFLKH8zzjBgjjDYIziMEgg/h1nPA8b0PEXXdoCo5w+UZrWGy5QsrHmNZFpALOAuNRnsYSsjTjDIvjPlWL9cr5DCgSinhygefJnxx3mJd119sMXNjjAnWRXTSgpRH1Kxq5Mw1jQ7FRoi6Q0VEuFwudwTrA+HC34M0iJ3B+NHDfPag8wjq7Q7+SVG0E2aWfDQeZEf8Em6SfQSxT94R54TE51QmZPY5ZfZ6uaDnJVab8Ufj/YT/CTfJgUlG9jAxaWL50dKtjiZgogLRimeEeDIhSx4sYqMxsFxbK9ABvgv1iDx4iOYFQlIONDhY9tHzMpLdJvsBT11ChujlC4Qsmfit5ml6wOblzIt7idDzg855X8AzTPy0XiDcl5J5kq35Ph/1tOwTfgPa5KFEXT9AugAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;\"\n        alt=\"graphql\"\n        title=\"\"\n        src=\"/static/8e2d84be2b8928f2a6fc9f574a03dc1c/73d01/graphql-08.png\"\n        srcset=\"/static/8e2d84be2b8928f2a6fc9f574a03dc1c/a3b1f/graphql-08.png 197w,\n/static/8e2d84be2b8928f2a6fc9f574a03dc1c/07137/graphql-08.png 393w,\n/static/8e2d84be2b8928f2a6fc9f574a03dc1c/73d01/graphql-08.png 786w,\n/static/8e2d84be2b8928f2a6fc9f574a03dc1c/1d25d/graphql-08.png 834w\"\n        sizes=\"(max-width: 786px) 100vw, 786px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>浏览器访问 <a href=\"http://localhost:8000/pandas-and-bananas/\">http://localhost:8000/pandas-and-bananas/</a></p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f8daba413f341cc86968600e3a07aba2/04cb1/pandas-and-bananas.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 725px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 35.86206896551724%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAAx0lEQVQoz62Q2Q6CMBBF+f8/AxdcXvQFDSGAKZTERu3KtVOFSEyMJt7mpJ3p9LadyFoHfhK4CglS32Oi3ideGXIkrUw4R9CaFBltUB0bdEyMxVJKONe/mU3wg0wug6F8Gip5w2qdYr6YY7/bY7PZIoljJMkMyzTFIcvwreiiSGuNPM+R+YNFUaAsSzRNE2airmu0bTvCOQ8wX0Nxx7sQO+ceLyRDxhjqqsJZiLBhjIG1NkBrqnlFKeWZ5oa+Rvijwpc/Nv5HSHeaESGpELvadQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;\"\n        alt=\"blog page\"\n        title=\"\"\n        src=\"/static/f8daba413f341cc86968600e3a07aba2/04cb1/pandas-and-bananas.png\"\n        srcset=\"/static/f8daba413f341cc86968600e3a07aba2/a3b1f/pandas-and-bananas.png 197w,\n/static/f8daba413f341cc86968600e3a07aba2/07137/pandas-and-bananas.png 393w,\n/static/f8daba413f341cc86968600e3a07aba2/04cb1/pandas-and-bananas.png 725w\"\n        sizes=\"(max-width: 725px) 100vw, 725px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>可以正确的访问博客页面了。</p>\n<p>修改一下首页，使其显示文章列表。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// ./src/pages/index.js\n\nimport React from &quot;react&quot;\nimport Link from &quot;gatsby-link&quot;\n\nexport default ({ data }) =&gt; {\n  return (\n    &lt;div&gt;\n      &lt;h2&gt;\n        Amazing Pandas Eating Things\n      &lt;/h2&gt;\n      &lt;h4&gt;\n        {data.allMarkdownRemark.totalCount} Posts\n      &lt;/h4&gt;\n      {data.allMarkdownRemark.edges.map(({ node }) =&gt;\n        &lt;div key={node.id}&gt;\n          &lt;Link\n            to={node.fields.slug}\n          &gt;\n            &lt;h3&gt;\n              {node.frontmatter.title}{&quot; &quot;}\n              &lt;span&gt;— {node.frontmatter.date}&lt;/span&gt;\n            &lt;/h3&gt;\n            &lt;p&gt;\n              {node.excerpt}\n            &lt;/p&gt;\n          &lt;/Link&gt;\n        &lt;/div&gt;\n      )}\n    &lt;/div&gt;\n  )\n}\n\nexport const query = graphql`\n  query IndexQuery {\n    allMarkdownRemark(sort: { fields: [frontmatter___date], order: DESC }) {\n      totalCount\n      edges {\n        node {\n          id\n          frontmatter {\n            title\n            date(formatString: &quot;DD MMMM, YYYY&quot;)\n          }\n          fields {\n            slug\n          }\n          excerpt\n        }\n      }\n    }\n  }\n`</code></pre></div>\n<p>博客系统到此完成了。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1522ec71c97304c8e8458c31365dd535/f84ea/home.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 632px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 56.0126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABcElEQVQoz42S63KCMBCFef8nq3/s1FbtWKnKWAGBAAkJN+F0N0iH2uvOnDnZEJZ8yzqVaSBCiVLX6PseXddZn65H5xifcXSXzr7X1C15Y/cdnVfwniMUaYW/YlqU49J2EIGEURXEWQ0FExHjde/i8WmB1XKFxeIBy9Uam80G9/M5XrZbzGZ35O6nG45Fb8NRSsLzPGRZBikltNZWxhibK6U+/BZ5WnyUowsN3w+uTFO+Sd5zv/pvC3wpKBNDPYzh7xIc1iF2ywAnWudxgeNLhD3tvbkxomOG/4SjUo2jGyHwBClFSC5ChfQ8iJueRso2ndcJiZ3z2M+RsCjPEz3cUKUGx22M4CDII/h7YUehLGrwSNVlA1MM+bjX1he0zcWOS8Pra24LFpmxRUK6HaOx8wcYm78shbHo/o4I6FxGrfgVWcvSFsmighCkxbVI7OGAyIpPA1pCZ4q8/Pkv83AyRlO1qK9qpiIsxp6K8W5HaIx32NxShqRxfX0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;\"\n        alt=\"home page\"\n        title=\"\"\n        src=\"/static/1522ec71c97304c8e8458c31365dd535/f84ea/home.png\"\n        srcset=\"/static/1522ec71c97304c8e8458c31365dd535/a3b1f/home.png 197w,\n/static/1522ec71c97304c8e8458c31365dd535/07137/home.png 393w,\n/static/1522ec71c97304c8e8458c31365dd535/f84ea/home.png 632w\"\n        sizes=\"(max-width: 632px) 100vw, 632px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>为了方便演示，这里只实现了基本功能，css，标签，翻页等就此略去。</p>\n<h2 id=\"发布\"><a href=\"#%E5%8F%91%E5%B8%83\" aria-label=\"发布 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>发布</h2>\n<p>Gatsby 是静态站点生成器，现在这种前后台的交互只存在开发模式下，在部署到生产环境前，我们可以就整个站点编译成一批静态资源，方便部署到静态站点伺服器上。</p>\n<p>这个操作只需要运行一个命令即可完成</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">gatsby build</code></pre></div>\n<p>生成的数据位于项目的 <code class=\"language-text\">public</code> 文件夹下。</p>\n<h2 id=\"结语\"><a href=\"#%E7%BB%93%E8%AF%AD\" aria-label=\"结语 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>结语</h2>\n<p>从整个博客的创建过程可以看到，Gatsby 在功能上是很强大灵活的，而使用上又不失简单方便。数据源方面可以接入 redis, mongo, mysql 等数据库系统，可以接入 medium, wordpress 等现成的博客和 CMS 系统，具体有哪些可以看看官方提供的插件，如果没有，你也可以自己贡献插件。不管是何种数据，只要能导入到 GraphQL 节点，Gatsby 就能使用。界面方面使用 React，功能和灵活性上的强大不言而喻。以 GraphQL 作为这两者的桥接简直是画龙点睛。</p>","excerpt":"介绍 Gatsby 是一款基于 React 和 GraphQL 的静态文档生成器。 Gatsby 从各种媒介收集数据源，通过 GraphQL 暴露给前端，前端使用 React 生成界面。Gatsby…","timeToRead":10,"headings":[{"value":"介绍","depth":2},{"value":"准备","depth":2},{"value":"体验","depth":2},{"value":"布局","depth":2},{"value":"GraphQL","depth":2},{"value":"数据","depth":2},{"value":"节点","depth":2},{"value":"页面","depth":2},{"value":"发布","depth":2},{"value":"结语","depth":2}],"frontmatter":{"title":"使用 Gatsby 创建静态站点","notoc":null,"excerpt":"Gatsby 是一款超赞的基于 React 和 GraphQL 静态文档生成器，本文将以从零搭建一个博客系统的形式演示如何使用 Gatsby 生成静态站点。","date":"March 12th 2018","rawDate":"2018-03-12"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/how-to-use-gatsby/","prev":{"fields":{"slug":"/how-to-automate-testing-api-with-htte/"},"frontmatter":{"title":"基于 Htte 的 API 自动化测试","draft":null,"tags":["howto","htte","api-testing","automation-testing"]}},"next":{"fields":{"slug":"/dockerfile-entrypoint-vs-cmd/"},"frontmatter":{"title":"对比分析 Dockerfile 中的 ENTRYPOINT 和 CMD","draft":false,"tags":["options","docker"]}}}}